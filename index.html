<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>L'ALCHIMISTE - Gestion des Réservations</title>
    <style>
        body { font-family: Arial, sans-serif; text-align: center; padding: 10px; }
        h1 { font-size: 24px; font-weight: bold; }
        .plan-container {
            position: relative;
            width: 800px;
            height: 600px;
            margin: auto;
            background: url('/mnt/data/1692D4B0-FB42-4F27-BF4F-91DDA5FC30C8.jpeg') no-repeat center;
            background-size: cover;
        }
        .table {
            position: absolute;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 5px;
            font-weight: bold;
            color: white;
            cursor: pointer;
            border: 2px solid black;
            text-align: center;
            font-size: 0.8rem;
        }
        .reserved { background-color: red; }
        .pending { background-color: orange; }
        .free { background-color: green; }
    </style>
</head>
<body>
    <h1>L'ALCHIMISTE</h1>
    <h2>Gestion des Réservations</h2>
    
    <div class="plan-container" id="plan-container">
        <script>
            const tablePositions = [
                { number: 1, left: '85%', top: '5%' }, { number: 2, left: '80%', top: '5%' }, { number: 3, left: '75%', top: '5%' }, { number: 4, left: '70%', top: '5%' },
                { number: 5, left: '60%', top: '5%' }, { number: 6, left: '55%', top: '5%' }, { number: 7, left: '50%', top: '5%' },
                { number: 8, left: '85%', top: '20%' }, { number: 9, left: '80%', top: '20%' }, { number: 10, left: '75%', top: '20%' },
                { number: 20, left: '60%', top: '40%' }, { number: 21, left: '65%', top: '40%' }, { number: 22, left: '55%', top: '40%' }, { number: 23, left: '50%', top: '40%' },
                { number: 48, left: '40%', top: '70%' }, { number: 49, left: '45%', top: '70%' },
                { number: 43, left: '30%', top: '50%' }, { number: 44, left: '35%', top: '50%' }, { number: 45, left: '40%', top: '50%' },
                { number: 50, left: '5%', top: '60%' }, { number: 51, left: '10%', top: '60%' }, { number: 52, left: '5%', top: '65%' }, { number: 53, left: '10%', top: '65%' },
            ];

            let tablesData = JSON.parse(localStorage.getItem("tablesData")) || tablePositions.map(t => ({ number: t.number, status: "L", name: "", time: "", people: 0, deposit: 0 }));

            function renderTables() {
                const container = document.getElementById("plan-container");
                container.innerHTML = "";
                tablesData.forEach(table => {
                    const tablePos = tablePositions.find(t => t.number === table.number);
                    if (tablePos) {
                        const div = document.createElement("div");
                        div.className = "table " + (table.status === "R" ? "reserved" : table.status === "Att" ? "pending" : "free");
                        div.innerHTML = `${table.number}`;
                        div.style.left = tablePos.left;
                        div.style.top = tablePos.top;
                        div.onclick = () => selectTable(table.number);
                        container.appendChild(div);
                    }
                });
            }

            function selectTable(tableNumber) {
                let table = tablesData.find(t => t.number === tableNumber);
                if (table) {
                    document.getElementById("tableNumber").value = table.number;
                    document.getElementById("name").value = table.name;
                    document.getElementById("people").value = table.people;
                    document.getElementById("time").value = table.time;
                    document.getElementById("deposit").value = table.deposit;
                }
            }

            window.addEventListener("load", renderTables);
        </script>
    </div>
</body>
</html>
